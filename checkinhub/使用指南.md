# CheckinHub ä½¿ç”¨æŒ‡å—

## ğŸ“š ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
3. [è¿è¡Œç­¾åˆ°](#è¿è¡Œç­¾åˆ°)
4. [æŸ¥çœ‹æ—¥å¿—](#æŸ¥çœ‹æ—¥å¿—)
5. [è®¾ç½®é€šçŸ¥](#è®¾ç½®é€šçŸ¥)
6. [å®šæ—¶è¿è¡Œ](#å®šæ—¶è¿è¡Œ)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## å¿«é€Ÿå¼€å§‹

### è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

```bash
./quickstart.sh
```

### æ‰‹åŠ¨å®‰è£…

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config/config.toml.example config/config.toml
cp config/sites.toml.example config/sites.toml

# 3. ç¼–è¾‘é…ç½®
nano config/sites.toml
```

## é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ (config/config.toml)

```toml
[logging]
level = "INFO"                    # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR
console_output = true             # æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å°

[notifications.telegram]
enabled = false                   # æ˜¯å¦å¯ç”¨ Telegram é€šçŸ¥
bot_token = "YOUR_BOT_TOKEN"      # Bot Token
chat_id = "YOUR_CHAT_ID"          # Chat ID

[notifications.dingtalk]
enabled = false                   # æ˜¯å¦å¯ç”¨é’‰é’‰é€šçŸ¥
webhook = "YOUR_WEBHOOK"          # Webhook åœ°å€
secret = "YOUR_SECRET"            # åŠ ç­¾å¯†é’¥
```

### ç«™ç‚¹é…ç½®æ–‡ä»¶ (config/sites.toml)

æ¯ä¸ªç«™ç‚¹çš„é…ç½®æ ¼å¼ï¼š

```toml
[ç«™ç‚¹ID]
name = "ç«™ç‚¹åç§°"
enabled = true              # æ˜¯å¦å¯ç”¨
notify = true               # æ˜¯å¦å‘é€é€šçŸ¥

[[ç«™ç‚¹ID.accounts]]
username = "ç”¨æˆ·å"
password = "å¯†ç "
cookie = "Cookieå­—ç¬¦ä¸²"
enabled = true              # è¯¥è´¦æˆ·æ˜¯å¦å¯ç”¨
```

### ç¤ºä¾‹ï¼šé…ç½® GLaDOS

```toml
[glados]
name = "GLaDOS"
enabled = true
notify = true

[[glados.accounts]]
username = "your@email.com"
password = ""
cookie = "koa:sess=ä½ çš„Cookie"
enabled = true
```

**å¦‚ä½•è·å– Cookieï¼Ÿ**

1. æ‰“å¼€æµè§ˆå™¨ï¼Œç™»å½• GLaDOS
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° "Application" æˆ– "å­˜å‚¨" æ ‡ç­¾
4. å·¦ä¾§é€‰æ‹© "Cookies"
5. æ‰¾åˆ° `koa:sess` çš„å€¼ï¼Œå¤åˆ¶å®Œæ•´å†…å®¹

### ç¤ºä¾‹ï¼šé…ç½® HostLoc

```toml
[hostloc]
name = "HostLocè®ºå›"
enabled = true
notify = true

[[hostloc.accounts]]
username = "your_username"
cookie = "ä½ çš„Cookieå­—ç¬¦ä¸²"
uid = "123456"
enabled = true
```

**å¦‚ä½•è·å– UIDï¼Ÿ**

ç™»å½•åè®¿é—®ä¸ªäººä¸»é¡µï¼ŒURL ä¸­çš„æ•°å­—å°±æ˜¯ä½ çš„ UIDï¼š
```
https://hostloc.com/space-uid-123456.html
                              ^^^^^^ è¿™å°±æ˜¯ UID
```

## è¿è¡Œç­¾åˆ°

### æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç«™ç‚¹

```bash
python main.py --list
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
å¯ç”¨ç«™ç‚¹åˆ—è¡¨:
============================================================
  [âœ“] example      - ç¤ºä¾‹ç«™ç‚¹                (å¯ç”¨, 2 ä¸ªè´¦æˆ·)
  [âœ“] glados       - GLaDOS                 (å¯ç”¨, 1 ä¸ªè´¦æˆ·)
  [âœ—] hostloc      - HostLocè®ºå›            (ç¦ç”¨, 0 ä¸ªè´¦æˆ·)
============================================================

æ€»è®¡: 3 ä¸ªç«™ç‚¹
```

### è¿è¡Œæ‰€æœ‰å¯ç”¨çš„ç«™ç‚¹

```bash
python main.py
```

### è¿è¡ŒæŒ‡å®šç«™ç‚¹

```bash
# è¿è¡Œå•ä¸ªç«™ç‚¹
python main.py glados

# è¿è¡Œå¤šä¸ªç«™ç‚¹
python main.py glados hostloc
```

### æŒ‡å®šé…ç½®æ–‡ä»¶

```bash
python main.py --config /path/to/config.toml --sites-config /path/to/sites.toml
```

## æŸ¥çœ‹æ—¥å¿—

### æ—¥å¿—æ–‡ä»¶ä½ç½®

```
logs/
â”œâ”€â”€ main.log                    # ä¸»ç¨‹åºæ—¥å¿—
â”œâ”€â”€ example_2024-01-15.log     # ç¤ºä¾‹ç«™ç‚¹ä»Šå¤©çš„æ—¥å¿—
â”œâ”€â”€ glados_2024-01-15.log      # GLaDOS ä»Šå¤©çš„æ—¥å¿—
â””â”€â”€ glados_2024-01-14.log      # GLaDOS æ˜¨å¤©çš„æ—¥å¿—
```

### å®æ—¶æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹ä¸»æ—¥å¿—
tail -f logs/main.log

# æŸ¥çœ‹ç‰¹å®šç«™ç‚¹æ—¥å¿—ï¼ˆä»Šå¤©ï¼‰
tail -f logs/glados_$(date +%Y-%m-%d).log
```

### æ—¥å¿—å†…å®¹ç¤ºä¾‹

```
2024-01-15 08:00:00 - checkinhub.glados - INFO - ==================================================
2024-01-15 08:00:00 - checkinhub.glados - INFO - å¼€å§‹ç­¾åˆ°: GLaDOS
2024-01-15 08:00:00 - checkinhub.glados - INFO - ==================================================
2024-01-15 08:00:01 - checkinhub.glados - INFO - æ­£åœ¨ç­¾åˆ°è´¦æˆ·: user@email.com
2024-01-15 08:00:03 - checkinhub.glados - INFO - [user@email.com] ç­¾åˆ°æˆåŠŸ: è·å¾— 1 å¤©
2024-01-15 08:00:03 - checkinhub.glados - INFO - ç­¾åˆ°å®Œæˆ: æˆåŠŸ 1/1
```

## è®¾ç½®é€šçŸ¥

### Telegram é€šçŸ¥

#### 1. åˆ›å»º Bot

1. åœ¨ Telegram ä¸­æœç´¢ `@BotFather`
2. å‘é€ `/newbot` åˆ›å»ºæ–°æœºå™¨äºº
3. æŒ‰æç¤ºè®¾ç½®æœºå™¨äººåç§°
4. è·å¾— `bot_token`ï¼ˆç±»ä¼¼ï¼š`123456789:ABCdefGHIjklMNOpqrsTUVwxyz`ï¼‰

#### 2. è·å– Chat ID

1. åœ¨ Telegram ä¸­æœç´¢ `@userinfobot`
2. å‘é€ä»»æ„æ¶ˆæ¯
3. è·å¾—ä½ çš„ `chat_id`ï¼ˆçº¯æ•°å­—ï¼‰

#### 3. é…ç½®

ç¼–è¾‘ `config/config.toml`ï¼š

```toml
[notifications.telegram]
enabled = true
bot_token = "123456789:ABCdefGHIjklMNOpqrsTUVwxyz"
chat_id = "123456789"
```

#### 4. æµ‹è¯•

è¿è¡Œç­¾åˆ°åï¼ŒTelegram ä¼šæ”¶åˆ°é€šçŸ¥æ¶ˆæ¯ã€‚

### é’‰é’‰é€šçŸ¥

#### 1. åˆ›å»ºç¾¤æœºå™¨äºº

1. æ‰“å¼€é’‰é’‰ï¼Œè¿›å…¥è¦æ¥æ”¶é€šçŸ¥çš„ç¾¤
2. ç¾¤è®¾ç½® â†’ æ™ºèƒ½ç¾¤åŠ©æ‰‹ â†’ æ·»åŠ æœºå™¨äºº â†’ è‡ªå®šä¹‰
3. è®¾ç½®æœºå™¨äººåç§°ï¼ˆå¦‚ï¼šCheckinHubï¼‰
4. å®‰å…¨è®¾ç½®é€‰æ‹©"åŠ ç­¾"
5. å¤åˆ¶ Webhook åœ°å€å’ŒåŠ ç­¾å¯†é’¥

#### 2. é…ç½®

ç¼–è¾‘ `config/config.toml`ï¼š

```toml
[notifications.dingtalk]
enabled = true
webhook = "https://oapi.dingtalk.com/robot/send?access_token=xxxxx"
secret = "SECxxxxxxxxxxxxxxxxxxxxx"
```

#### 3. æµ‹è¯•

è¿è¡Œç­¾åˆ°åï¼Œé’‰é’‰ç¾¤ä¼šæ”¶åˆ°é€šçŸ¥æ¶ˆæ¯ã€‚

### é€šçŸ¥å†…å®¹ç¤ºä¾‹

```
ğŸ“Š GLaDOS ç­¾åˆ°æŠ¥å‘Š

âœ… user1@email.com: ç­¾åˆ°æˆåŠŸ: è·å¾— 1 å¤©
âœ… user2@email.com: ç­¾åˆ°æˆåŠŸ: è·å¾— 1 å¤©

æ€»è®¡: æˆåŠŸ 2/2
```

## å®šæ—¶è¿è¡Œ

### Linux/Mac - ä½¿ç”¨ cron

ç¼–è¾‘ crontabï¼š
```bash
crontab -e
```

æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©æ—©ä¸Š 8 ç‚¹ï¼‰ï¼š
```bash
0 8 * * * cd /path/to/checkinhub && /usr/bin/python3 main.py >> /path/to/checkinhub/logs/cron.log 2>&1
```

æŸ¥çœ‹ cron ä»»åŠ¡ï¼š
```bash
crontab -l
```

### Windows - ä½¿ç”¨ä»»åŠ¡è®¡åˆ’ç¨‹åº

1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"
2. å³ä¾§ç‚¹å‡»"åˆ›å»ºåŸºæœ¬ä»»åŠ¡"
3. åç§°ï¼šCheckinHub è‡ªåŠ¨ç­¾åˆ°
4. è§¦å‘å™¨ï¼šæ¯å¤©
5. æ—¶é—´ï¼š08:00:00
6. æ“ä½œï¼šå¯åŠ¨ç¨‹åº
   - ç¨‹åºï¼š`C:\Python3\python.exe`
   - å‚æ•°ï¼š`main.py`
   - èµ·å§‹äºï¼š`C:\path\to\checkinhub`
7. å®Œæˆåˆ›å»º

### Docker - ä½¿ç”¨ cron

ç¼–è¾‘ `docker-compose.yml`ï¼š

```yaml
version: '3.8'

services:
  checkinhub:
    build: .
    container_name: checkinhub
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
    environment:
      - TZ=Asia/Shanghai
      - CRON_SCHEDULE=0 8 * * *
    restart: unless-stopped
```

### éªŒè¯å®šæ—¶ä»»åŠ¡

æ·»åŠ å®šæ—¶ä»»åŠ¡åï¼Œå¯ä»¥ï¼š

1. ç­‰å¾…ä¸‹æ¬¡è¿è¡Œæ—¶é—´
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ç¡®è®¤æ‰§è¡Œ
3. æ£€æŸ¥é€šçŸ¥æ˜¯å¦æ”¶åˆ°

## å¸¸è§é—®é¢˜

### 1. ç­¾åˆ°å¤±è´¥ï¼šCookie è¿‡æœŸ

**ç°è±¡**ï¼š
```
[user@email.com] ç­¾åˆ°å¤±è´¥: HTTP 401
```

**è§£å†³**ï¼š
1. é‡æ–°ç™»å½•ç«™ç‚¹
2. è·å–æ–°çš„ Cookie
3. æ›´æ–° `config/sites.toml`

### 2. é€šçŸ¥æ²¡æœ‰æ”¶åˆ°

**æ£€æŸ¥**ï¼š
1. é…ç½®æ–‡ä»¶ä¸­ `enabled = true`
2. Token/Webhook é…ç½®æ­£ç¡®
3. æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
4. ç«™ç‚¹é…ç½®ä¸­ `notify = true`

### 3. å¯¼å…¥æ¨¡å—é”™è¯¯

**é”™è¯¯**ï¼š
```
ModuleNotFoundError: No module named 'aiohttp'
```

**è§£å†³**ï¼š
```bash
pip install -r requirements.txt
```

### 4. é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯

**é”™è¯¯**ï¼š
```
toml.decoder.TomlDecodeError
```

**è§£å†³**ï¼š
1. æ£€æŸ¥ TOML è¯­æ³•
2. ç¡®ä¿å¼•å·é…å¯¹
3. ä½¿ç”¨åœ¨çº¿ TOML éªŒè¯å™¨

### 5. æƒé™é”™è¯¯ï¼ˆLinux/Macï¼‰

**é”™è¯¯**ï¼š
```
Permission denied
```

**è§£å†³**ï¼š
```bash
chmod +x main.py
chmod +x quickstart.sh
```

### 6. æ—¶åŒºä¸æ­£ç¡®

**è§£å†³**ï¼š

ç¼–è¾‘é…ç½®æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export TZ=Asia/Shanghai
python main.py
```

### 7. æ—¥å¿—æ–‡ä»¶å¤ªå¤š

**æ¸…ç†æ—§æ—¥å¿—**ï¼š
```bash
# åˆ é™¤ 7 å¤©å‰çš„æ—¥å¿—
find logs/ -name "*.log" -mtime +7 -delete
```

**è‡ªåŠ¨æ¸…ç†ï¼ˆæ·»åŠ åˆ° crontabï¼‰**ï¼š
```bash
0 0 * * 0 find /path/to/checkinhub/logs/ -name "*.log" -mtime +30 -delete
```

## é«˜çº§æŠ€å·§

### 1. æ‰¹é‡æ·»åŠ è´¦æˆ·

ç›´æ¥ç¼–è¾‘ `config/sites.toml`ï¼š

```toml
[glados]
name = "GLaDOS"
enabled = true
notify = true

[[glados.accounts]]
username = "user1@email.com"
cookie = "cookie1"
enabled = true

[[glados.accounts]]
username = "user2@email.com"
cookie = "cookie2"
enabled = true

[[glados.accounts]]
username = "user3@email.com"
cookie = "cookie3"
enabled = true
```

### 2. åˆ†ç»„è¿è¡Œ

åˆ›å»ºä¸åŒçš„é…ç½®æ–‡ä»¶ï¼š

```bash
# è¿è¡Œ VIP ç«™ç‚¹
python main.py --sites-config config/sites-vip.toml

# è¿è¡Œæµ‹è¯•ç«™ç‚¹
python main.py --sites-config config/sites-test.toml
```

### 3. åªå‘é€å¤±è´¥é€šçŸ¥

ä¿®æ”¹ `main.py` ä¸­çš„é€šçŸ¥é€»è¾‘ï¼š

```python
# åªåœ¨æœ‰å¤±è´¥æ—¶é€šçŸ¥
if should_notify and results:
    failed_count = sum(1 for r in results if not r.success)
    if failed_count > 0:
        message = site.format_results_message(results, accounts)
        # å‘é€é€šçŸ¥...
```

### 4. è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼

ç¼–è¾‘ `config/config.toml`ï¼š

```toml
[logging]
level = "INFO"
format = "[%(levelname)s] %(asctime)s - %(message)s"
```

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ GitHub Releases è·å–æœ€æ–°ç‰ˆæœ¬å’Œæ›´æ–°è¯´æ˜ã€‚

## è·å–å¸®åŠ©

- æŸ¥çœ‹æ–‡æ¡£ï¼š[README.md](README.md)
- å¼€å‘æŒ‡å—ï¼š[DEVELOP.md](DEVELOP.md)
- æäº¤ Issueï¼šGitHub Issues
- åŠ å…¥è®¨è®ºï¼šGitHub Discussions

## å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆå„ç«™ç‚¹çš„æœåŠ¡æ¡æ¬¾ã€‚ä½¿ç”¨æœ¬å·¥å…·æ‰€äº§ç”Ÿçš„ä»»ä½•åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚
